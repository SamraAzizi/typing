<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }

        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 90%;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .timer {
            font-size: 2rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .text-display {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            line-height: 1.5;
        }

        .input-area {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            margin-bottom: 1rem;
            resize: none;
        }

        .input-area:focus {
            outline: none;
            border-color: #007bff;
        }

        .results {
            text-align: center;
            margin-top: 1rem;
        }

        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .correct {
            color: #28a745;
        }

        .incorrect {
            color: #dc3545;
            text-decoration: underline;
        }

        .current {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Typing Speed Test</h1>
            <div class="timer">60</div>
        </div>
        
        <div class="text-display"></div>
        <textarea class="input-area" placeholder="Start typing here..." disabled></textarea>
        <button class="btn">Start Test</button>
        
        <div class="results">
            <h2>Results</h2>
            <p>WPM: <span class="wpm">0</span></p>
            <p>Accuracy: <span class="accuracy">0</span>%</p>
        </div>
    </div>

    <script>
        const textDisplay = document.querySelector('.text-display');
        const inputArea = document.querySelector('.input-area');
        const timer = document.querySelector('.timer');
        const startButton = document.querySelector('.btn');
        const wpmDisplay = document.querySelector('.wpm');
        const accuracyDisplay = document.querySelector('.accuracy');

        const texts = [
            "The quick brown fox jumps over the lazy dog.",
            "To be or not to be, that is the question.",
            "All that glitters is not gold.",
            "Practice makes perfect.",
            "Actions speak louder than words."
        ];

        let timeLeft = 60;
        let timeElapsed = 0;
        let currentText = "";
        let isTyping = false;
        let timer_id = null;
        let mistakes = 0;

        function getRandomText() {
            return texts[Math.floor(Math.random() * texts.length)];
        }

        function updateTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                timeElapsed++;
                timer.textContent = timeLeft;
            } else {
                finishTest();
            }
        }

        function finishTest() {
            clearInterval(timer_id);
            inputArea.disabled = true;
            
            // Calculate WPM
            const words = inputArea.value.trim().split(/\s+/).length;
            const wpm = Math.round((words / timeElapsed) * 60);
            
            // Calculate accuracy
            const accuracy = Math.round(((currentText.length - mistakes) / currentText.length) * 100);
            
            wpmDisplay.textContent = wpm;
            accuracyDisplay.textContent = accuracy;
            
            startButton.style.display = 'block';
        }

        function startTest() {
            mistakes = 0;
            timeLeft = 60;
            timeElapsed = 0;
            isTyping = true;
            inputArea.disabled = false;
            inputArea.value = "";
            startButton.style.display = 'none';
            
            currentText = getRandomText();
            textDisplay.innerHTML = currentText;
            
            timer_id = setInterval(updateTimer, 1000);
            inputArea.focus();
        }

        function checkInput() {
            const currentInput = inputArea.value;
            const currentInputArray = currentInput.split('');
            const currentTextArray = currentText.split('');
            
            let displayHTML = "";
            
            currentTextArray.forEach((char, index) => {
                if (index < currentInputArray.length) {
                    if (char === currentInputArray[index]) {
                        displayHTML += `<span class="correct">${char}</span>`;
                    } else {
                        displayHTML += `<span class="incorrect">${char}</span>`;
                        if (!mistakes) mistakes++;
                    }
                } else if (index === currentInputArray.length) {
                    displayHTML += `<span class="current">${char}</span>`;
                } else {
                    displayHTML += char;
                }
            });
            
            textDisplay.innerHTML = displayHTML;
            
            // Check if current text is complete
            if (currentInput.length === currentText.length) {
                currentText = getRandomText();
                textDisplay.innerHTML = currentText;
                inputArea.value = "";
            }
        }

        startButton.addEventListener('click', startTest);
        inputArea.addEventListener('input', checkInput);
    </script>
</body>
</html>
